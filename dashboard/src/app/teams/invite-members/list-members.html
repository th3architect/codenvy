<!--

    Copyright (c) 2015 Codenvy, S.A.
    All rights reserved. This program and the accompanying materials
    are made available under the terms of the Eclipse Public License v1.0
    which accompanies this distribution, and is available at
    http://www.eclipse.org/legal/epl-v10.html

    Contributors:
      Codenvy, S.A. - initial API and implementation

-->
<div class="list-members" layout="column">

  <div ng-if="listMembersController.members.length > 0" class="list-members-spacing">
    <che-list-header>
      <div flex="100"
           layout="row"
           layout-align="start stretch"
           class="che-list-item-row">
        <div layout="row"
             layout-align="start center"
             class="che-checkbox-area">
          <div layout="row" layout-align="start center" class="che-list-item-checkbox-main">
            <md-checkbox class="che-list-item-checkbox"
                         aria-label="All members"
                         md-theme="default"
                         ng-checked="listMembersController.isBulkChecked"
                         ng-click="listMembersController.changeBulkSelection()"></md-checkbox>
          </div>
        </div>
        <div flex hide-xs layout-gt-xs="row"
             layout-align="start center"
             class="che-list-item-details">
          <che-list-header-column flex="20"
                                  che-sort-value="listMembersController.membersOrderBy"
                                  che-sort-item="name"
                                  che-column-title='Invited Developers'></che-list-header-column>
          <che-list-header-column flex="20"
                                  che-column-title='Manage Team'></che-list-header-column>
          <che-list-header-column flex="20"
                                  che-column-title='Manage Resources'></che-list-header-column>
          <che-list-header-column flex="20"
                                  che-column-title='Manage Workspaces'></che-list-header-column>
          <che-list-header-column flex="20"
                                  che-column-title='Create Workspaces'></che-list-header-column>
        </div>
      </div>
    </che-list-header>
    <che-list flex>
      <che-list-item ng-mouseover="hover=true" ng-mouseout="hover=false"
                     ng-repeat="member in listMembersController.members | orderBy:listMembersController.membersOrderBy">
        <div flex="100"
             layout="row"
             layout-align="start stretch"
             class="member-item-row">
          <div layout="row"
               layout-align="start center"
               class="che-checkbox-area">
            <che-list-item-checked ng-model="listMembersController.membersSelectedStatus[member.email]"
                                   che-aria-label-checkbox="Member {{member.email}}"
                                   ng-click="listMembersController.updateSelectedStatus()"></che-list-item-checked>
          </div>
          <div flex
               layout-xs="column" layout-gt-xs="row"
               layout-align-gt-xs="start center"
               layout-align-xs="start start"
               class="che-list-item-details">
            <div flex="20"
                 class="che-list-item-name">
              <span class="material-design icon-ic_done_24px user-exists-checked" ng-if="member.id"></span>
              <span class="che-hover">{{member.email}}</span>
            </div>
            <div flex="20">
              <md-switch ng-model="listMembersController.memberRoles[member.email].isManageTeam"
                         ng-change="listMembersController.onRolesChanged(member)"
                         aria-label="{{member}} manage team" class="permission-switcher">
              </md-switch>
            </div>
            <div flex="20">
              <md-switch ng-model="listMembersController.memberRoles[member.email].isManageResources"
                         ng-change="listMembersController.onRolesChanged(member)"
                         aria-label="{{member}} manage resources" class="permission-switcher">
              </md-switch>
            </div>
            <div flex="20">
              <md-switch ng-model="listMembersController.memberRoles[member.email].isManageWorkspaces"
                         ng-change="listMembersController.onRolesChanged(member)"
                         aria-label="{{member}} manage workspaces" class="permission-switcher">
              </md-switch>
            </div>
            <div flex="20">
              <md-switch ng-model="listMembersController.memberRoles[member.email].isCreateWorkspaces"
                         ng-change="listMembersController.onRolesChanged(member)"
                         aria-label="{{member}} create workspaces" class="permission-switcher">
              </md-switch>
            </div>
          </div>
        </div>
      </che-list-item>
    </che-list>
  </div>
  <!-- buttons -->
  <div layout="row">
    <div flex layout-align="center start">
      <che-button-default class="che-list-add-button"
                          che-button-title="Add" name="addButton"
                          ng-click="listMembersController.showAddDialog($event)"></che-button-default>
    </div>
    <div flex-offset="5" ng-if="listMembersController.members.length > 0">
      <che-button-primary-flat ng-disabled="(listMembersController.membersSelectedNumber === 0)"
                               che-button-title="Remove" name="removeButton"
                               ng-click="listMembersController.removeSelectedMembers()"></che-button-primary-flat>
    </div>
  </div>
</div>

